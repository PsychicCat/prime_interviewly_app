var app=angular.module("app",["ngMaterial","ngRoute","ui.grid","ui.grid.edit","ui.grid.rowEdit","ui.grid.exporter"]);app.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode({enabled:!0}),e.when("/home",{templateUrl:"views/partials/home.html"}).when("/",{templateUrl:"views/partials/login/login.html"}).when("/forgot",{templateUrl:"views/partials/forgot/forgot.html"}).when("/events",{templateUrl:"views/partials/events/events.html"}).when("/students",{templateUrl:"views/partials/students/students.html"}).when("/interviewers",{templateUrl:"views/partials/interviewers/interviewers.html"}).when("/archived-events",{templateUrl:"views/partials/archived-events/archived-events.html"}).when("/profile",{templateUrl:"views/partials/profile/profile.html"}).when("/logout",{templateUrl:"views/partials/logout/logout.html"}).when("/new-event",{templateUrl:"views/partials/new-event/new-event.html"}).when("/event",{templateUrl:"views/partials/event/event.html"}).when("/:token",{templateUrl:"views/partials/reset/reset.html",controller:"reset"}).otherwise({redirectTo:"/views/partials/login.html"})}]),app.controller("student",["$scope","$mdDialog",function(e,t){function o(e){e.close=function(){t.hide(),e.companies=[{name:"Prime"},{name:"Nerdery"},{name:"Digital People"}],e.events=[{name:"mocks Delta"},{name:"career Delta"},{name:"mocks Epsilon"}]}}e.openStudents=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/student.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("interviewer",["$scope","$mdDialog",function(e,t){e.openInterviewer=function(e){t.show({controller:"addInterviewer",templateUrl:"views/partials/dialogs/interviewer.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("uploads",["$scope","$mdDialog",function(e,t){function o(e,t){e.close=function(){t.hide()}}e.openUploads=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/upload.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("registerOpen",["$scope","$mdDialog","$http",function(e,t){function o(e,t,o){e.register=function(e,n,a){t.post("/api/users",{username:e,email:n,password:a}).then(function(e){console.log(e),200==e&&o.hide()})},e.close=function(){o.hide()}}e.openRegister=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/register.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("sendEmail",["$scope","$http","$location",function(e,t,o){e.send=function(e){t.post("/forgot",{email:e}).then(function(e){200==e.status&&o.path("/")})}}]),app.controller("login",["$rootScope","$scope","$http","$location","$mdToast",function(e,t,o,n,a){t.submit=function(t,r){o.post("/authenticate",{username:t,password:r}).then(function(t){t.data.token?(sessionStorage.username=angular.toJson(t.data.user.username),sessionStorage.email=angular.toJson(t.data.user.email),sessionStorage.token=angular.toJson(t.data.token),n.path("/events"),e.$broadcast("logged In")):a.showSimple(t.data.error)})}}]),app.controller("toolbar",["$rootScope","$scope","$window",function(e,t,o){t.user=o.sessionStorage,t.paths=!0,e.$on("logged In",function(){void 0==o.sessionStorage.token?t.paths=!0:t.paths=!1})}]),app.controller("reset",["$scope","$http","$routeParams","$location",function(e,t,o,n){e.changePass=function(e,a){console.log(e);var r=o.token;e===a&&t.post("/reset",{password:e,token:r}).then(function(e){console.log(e),200===e.status&&n.path("/")})}}]),app.controller("logout",["$rootScope","$scope","$location","$interval",function(e,t,o,n){t.logout=function(){o.path("/logout"),sessionStorage.clear(),e.$broadcast("logged In"),n(function(){o.path("/")},3e3,1)}}]),app.directive("verifySame",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("password",function(){n.$validate()})}}}),angular.module("app").controller("eventsCtrl",function(e){function t(e){var t,o=[];return t=angular.extend({},e),t.title=t.title,t.span={row:1,col:1},t.background="gray",t.span.row=t.span.col=1,o.push(t),o}this.tiles=t({title:"Event Title",background:""})}),app.controller("generateCtrl",["$scope","$http",function(e,t){var o=moment("1:00 PM","h:mm A").format("HH:mm"),n=moment("4:00 PM","h:mm A").format("HH:mm"),a=moment(n,"HH:mm").diff(moment(o,"HH:mm"),"minutes"),r=moment.duration(a/9,"minutes").asMinutes();console.log(moment(o,"HH:mm").add(8*r,"minutes").format("h:mm A"));var l=[],i=[];e.gridOptions={enableSorting:!1,enableGridMenu:!0,enableFiltering:!1,onRegisterApi:function(t){e.gridApi=t}},e.generate=function(){t({method:"GET",url:"http://localhost:3000/test"}).then(function(t){e.gridOptions.columnDefs=[],e.gridOptions.data=[],l=[],i=[],console.log(t),t.data.interviewer.forEach(function(e,t){l.push({name:e.company+" / "+e.fName,field:e.company+"_"+e.name,width:150,displayName:e.company+" / "+e.fName});var o=e.scheduled,n=[];Object.getOwnPropertyNames(o).forEach(function(t,a,r){titleObj={},titleObj[e.company+"_"+e.fname]=o[t],n.push(titleObj)}),i.push(n)}),i=_.unzip(i);var o=[];i.forEach(function(e,t){var n={};e.forEach(function(e,t){_.extend(n,e)}),o.push(n)}),gridObj={};for(var n=[],a=o.length;a--;)n.push({time:"Slot "+(o.length-a)});console.log(n),_.extend(gridObj,o),i=o}).then(function(){e.gridOptions.columnDefs=l,e.gridOptions.data=i})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImV2ZW50cy9ldmVudHMuY29udHJvbGxlci5qcyIsImV2ZW50L2V2ZW50LmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCIkc2NvcGUiLCIkbWREaWFsb2ciLCJhZGRTdHVkZW50IiwiY2xvc2UiLCJoaWRlIiwiY29tcGFuaWVzIiwibmFtZSIsImV2ZW50cyIsIm9wZW5TdHVkZW50cyIsImV2Iiwic2hvdyIsInBhcmVudCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImJvZHkiLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJvcGVuSW50ZXJ2aWV3ZXIiLCJ1cGxvYWRGaWxlIiwib3BlblVwbG9hZHMiLCJyZWdpc3RlciIsIiRodHRwIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJvcGVuUmVnaXN0ZXIiLCIkbG9jYXRpb24iLCJzZW5kIiwic3RhdHVzIiwicGF0aCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsInN1Ym1pdCIsImRhdGEiLCJ0b2tlbiIsInNlc3Npb25TdG9yYWdlIiwidG9Kc29uIiwidXNlciIsIiRicm9hZGNhc3QiLCJzaG93U2ltcGxlIiwiZXJyb3IiLCIkd2luZG93IiwicGF0aHMiLCIkb24iLCJ1bmRlZmluZWQiLCIkcm91dGVQYXJhbXMiLCJjaGFuZ2VQYXNzIiwiY29uZmlybSIsIiRpbnRlcnZhbCIsImxvZ291dCIsImNsZWFyIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImF0dHJpYnV0ZXMiLCJuZ01vZGVsIiwiJHZhbGlkYXRvcnMiLCJjb21wYXJlVG8iLCJtb2RlbFZhbHVlIiwiJHdhdGNoIiwiJHZhbGlkYXRlIiwiYnVpbGRHcmlkTW9kZWwiLCJ0aWxlVG1wbCIsIml0IiwicmVzdWx0cyIsImV4dGVuZCIsInRpdGxlIiwic3BhbiIsInJvdyIsImNvbCIsImJhY2tncm91bmQiLCJwdXNoIiwidGhpcyIsInRpbGVzIiwic3RhcnRUaW1lIiwibW9tZW50IiwiZm9ybWF0IiwiZW5kVGltZSIsImV2ZW50TGVuZ3RoIiwiZGlmZiIsInNsb3RMZW5ndGgiLCJkdXJhdGlvbiIsImFzTWludXRlcyIsImFkZCIsImdyaWRDb2xzIiwiZ3JpZERhdGEiLCJncmlkT3B0aW9ucyIsImVuYWJsZVNvcnRpbmciLCJlbmFibGVHcmlkTWVudSIsImVuYWJsZUZpbHRlcmluZyIsIm9uUmVnaXN0ZXJBcGkiLCJncmlkQXBpIiwiZ2VuZXJhdGUiLCJtZXRob2QiLCJ1cmwiLCJjb2x1bW5EZWZzIiwiaW50ZXJ2aWV3ZXIiLCJmb3JFYWNoIiwiaXRlbSIsInBvcyIsImNvbXBhbnkiLCJmTmFtZSIsImZpZWxkIiwid2lkdGgiLCJkaXNwbGF5TmFtZSIsInNjaGVkIiwic2NoZWR1bGVkIiwic3R1ZGVudHMiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZWxlbSIsImluZGV4IiwiYXJyYXkiLCJ0aXRsZU9iaiIsImZuYW1lIiwiXyIsInVuemlwIiwiZ3JpZEFyciIsInJvd09iaiIsImdyaWRPYmoiLCJ0aW1lU2xvdHMiLCJzbG90c1NpemUiLCJsZW5ndGgiLCJ0aW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQUEsYUFBQSxVQUFBLFVBQUEsZUFBQSxrQkFBQSxvQkFDQUYsS0FBQUcsUUFBQSxpQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxHQUNBQSxFQUFBQyxXQUNBQyxTQUFBLElBRUFILEVBQ0FJLEtBQUEsU0FDQUMsWUFBQSw2QkFFQUQsS0FBQSxLQUNBQyxZQUFBLG9D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RyxNQUFBQyxNQUFBSixFQUFBRSxRQUFBLElBQUFGLEVBQUFuRyxLQUFBd0csTUFBQSxJQUFBQyxZQUFBTixFQUFBRSxRQUFBLE1BQUFGLEVBQUFHLE9BSUEsSUFBQUksR0FBQVAsRUFBQVEsVUFJQUMsSUFHQUMsUUFBQUMsb0JBQUFKLEdBQUFSLFFBQUEsU0FBQWEsRUFBQUMsRUFBQUMsR0FHQUMsWUFDQUEsU0FBQWYsRUFBQUUsUUFBQSxJQUFBRixFQUFBZ0IsT0FBQVQsRUFBQUssR0FDQUgsRUFBQXBDLEtBQUEwQyxZQUlBNUIsRUFBQWQsS0FBQW9DLEtBT0F0QixFQUFBOEIsRUFBQUMsTUFBQS9CLEVBR0EsSUFBQWdDLEtBR0FoQyxHQUFBWSxRQUFBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQW1CLEtBSUFwQixHQUFBRCxRQUFBLFNBQUFhLEVBQUFDLEdBRUFJLEVBQUFsRCxPQUFBcUQsRUFBQVIsS0FJQU8sRUFBQTlDLEtBQUErQyxLQUlBQyxVQUtBLEtBRkEsR0FBQUMsTUFDQUMsRUFBQUosRUFBQUssT0FDQUQsS0FDQUQsRUFBQWpELE1BQUFvRCxLQUFBLFNBQUFOLEVBQUEsT0FBQUksSUFHQXBHLFNBQUFDLElBQUFrRyxHQUdBTCxFQUFBbEQsT0FBQXNELFFBQUFGLEdBR0FoQyxFQUFBZ0MsSUFDQWxHLEtBQUEsV0FHQTFCLEVBQUE2RixZQUFBUyxXQUFBWCxFQUNBM0YsRUFBQTZGLFlBQUF2RCxLQUFBc0QiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ01hdGVyaWFsJywgJ25nUm91dGUnLCAndWkuZ3JpZCcsICd1aS5ncmlkLmVkaXQnLCAndWkuZ3JpZC5yb3dFZGl0JywgJ3VpLmdyaWQuZXhwb3J0ZXInXSk7XG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpe1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICB9KTtcbiAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgd2hlbignL2hvbWUnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2hvbWUuaHRtbCdcbiAgICAgICAgfSkuXG4gICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2xvZ2luL2xvZ2luLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvZm9yZ290Jywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9mb3Jnb3QvZm9yZ290Lmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvZXZlbnRzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9ldmVudHMvZXZlbnRzLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvc3R1ZGVudHMnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL3N0dWRlbnRzL3N0dWRlbnRzLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvaW50ZXJ2aWV3ZXJzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9pbnRlcnZpZXdlcnMvaW50ZXJ2aWV3ZXJzLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvYXJjaGl2ZWQtZXZlbnRzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9hcmNoaXZlZC1ldmVudHMvYXJjaGl2ZWQtZXZlbnRzLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvcHJvZmlsZScsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvcHJvZmlsZS9wcm9maWxlLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvbG9nb3V0Jywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9sb2dvdXQvbG9nb3V0Lmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvbmV3LWV2ZW50Jywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9uZXctZXZlbnQvbmV3LWV2ZW50Lmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvZXZlbnQnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2V2ZW50L2V2ZW50Lmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvOnRva2VuJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9yZXNldC9yZXNldC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyZXNldCdcbiAgICAgICAgfSkuXG4gICAgICAgIG90aGVyd2lzZSh7XG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnL3ZpZXdzL3BhcnRpYWxzL2xvZ2luLmh0bWwnXG4gICAgfSlcbn1dKTtcblxuLy9TdHVkZW50IERpYWxvZyBDb250cm9sbGVyXG5hcHAuY29udHJvbGxlcignc3R1ZGVudCcsIFsnJHNjb3BlJywgJyRtZERpYWxvZycsIGZ1bmN0aW9uKCRzY29wZSwkbWREaWFsb2cpe1xuICAgICRzY29wZS5vcGVuU3R1ZGVudHMgPSBmdW5jdGlvbihldil7XG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGFkZFN0dWRlbnQsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2RpYWxvZ3Mvc3R1ZGVudC5kaWFsb2cuaHRtbCcsXG4gICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWVcbiAgICAgICAgfSlcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGFkZFN0dWRlbnQoJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGFuaWVzID0gW1xuICAgICAgICAgICAgICAgIHtuYW1lOiAnUHJpbWUnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ05lcmRlcnknfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ0RpZ2l0YWwgUGVvcGxlJ31cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAkc2NvcGUuZXZlbnRzID0gW1xuICAgICAgICAgICAgICAgIHtuYW1lOiAnbW9ja3MgRGVsdGEnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NhcmVlciBEZWx0YSd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnbW9ja3MgRXBzaWxvbid9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfVxuXG59XSk7XG5cbi8vSW50ZXJ2aWV3ZXIgRGlhbG9nIENvbnRyb2xsZXJcbmFwcC5jb250cm9sbGVyKCdpbnRlcnZpZXdlcicsIFsnJHNjb3BlJywgJyRtZERpYWxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJG1kRGlhbG9nKXtcbiAgICAkc2NvcGUub3BlbkludGVydmlld2VyID0gZnVuY3Rpb24oZXYpe1xuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYWRkSW50ZXJ2aWV3ZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9kaWFsb2dzL2ludGVydmlld2VyLmRpYWxvZy5odG1sJyxcbiAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuICAgICAgICB9KVxuICAgIH07XG4gICAgZnVuY3Rpb24gYWRkSW50ZXJ2aWV3ZXIoJHNjb3BlLCAkbWREaWFsb2cpe1xuICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgfTtcbiAgICAkc2NvcGUuY29ob3J0cyA9IFtcbiAgICAgICAge25hbWU6ICdEZWx0YSd9LFxuICAgICAgICB7bmFtZTogJ2dhbW1hJ30sXG4gICAgICAgIHtuYW1lOiAnRXBzaWxvbid9XG4gICAgXTtcbiAgICAkc2NvcGUuZXZlbnRzID0gW1xuICAgICAgICB7bmFtZTogJ21vY2tzIERlbHRhJ30sXG4gICAgICAgIHtuYW1lOiAnY2FyZWVyIERlbHRhJ30sXG4gICAgICAgIHtuYW1lOiAnbW9ja3MgRXBzaWxvbid9XG4gICAgXVxuICAgIH1cbn1dKTtcblxuLy9VcGxvYWQgRGlhbG9nIGNvbnRyb2xsZXJcbmFwcC5jb250cm9sbGVyKCd1cGxvYWRzJywgWyckc2NvcGUnLCAnJG1kRGlhbG9nJywgZnVuY3Rpb24oJHNjb3BlLCAkbWREaWFsb2cpe1xuICAgICRzY29wZS5vcGVuVXBsb2FkcyA9IGZ1bmN0aW9uKGV2KXtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogdXBsb2FkRmlsZSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZGlhbG9ncy91cGxvYWQuZGlhbG9nLmh0bWwnLFxuICAgICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXG4gICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBmdW5jdGlvbiB1cGxvYWRGaWxlKCRzY29wZSwgJG1kRGlhbG9nKXtcbiAgICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgZm9yIHRoZSByZWdpc3RyYXRpb24gYWxzbyBzZW5kcyBwb3N0IHRvIGNyZWF0ZSBhIHVzZXJcbmFwcC5jb250cm9sbGVyKCdyZWdpc3Rlck9wZW4nLCBbJyRzY29wZScsICckbWREaWFsb2cnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRtZERpYWxvZyl7XG4gICAgJHNjb3BlLm9wZW5SZWdpc3RlciA9IGZ1bmN0aW9uKGV2KXtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogcmVnaXN0ZXIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2RpYWxvZ3MvcmVnaXN0ZXIuZGlhbG9nLmh0bWwnLFxuICAgICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXG4gICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBmdW5jdGlvbiByZWdpc3Rlcigkc2NvcGUsICRodHRwLCAkbWREaWFsb2cpIHtcbiAgICAgICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCl7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2UgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgdG8gc2VuZCByZXNldCBlbWFpbFxuYXBwLmNvbnRyb2xsZXIoJ3NlbmRFbWFpbCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbil7XG4gICAgJHNjb3BlLnNlbmQgPSBmdW5jdGlvbihlbWFpbCkge1xuICAgICAgICAkaHR0cC5wb3N0KCcvZm9yZ290Jywge2VtYWlsOiBlbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XSk7XG5cbi8vY29udHJvbGxlciB0byBzZW5kIHBhc3N3b3JkIHRvIGF1dGhlbnRpY2F0aW9uIGFuZCBsb2dpbiB0byB3ZWJzaXRlIG9uIGNvbmZpcm1hdGlvblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luJywgWyckcm9vdFNjb3BlJywnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICckbWRUb2FzdCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgJG1kVG9hc3Qpe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXV0aGVudGljYXRlJywge3VzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS50b2tlbil7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnVzZXJuYW1lID0gYW5ndWxhci50b0pzb24ocmVzcG9uc2UuZGF0YS51c2VyLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UuZW1haWwgPSBhbmd1bGFyLnRvSnNvbihyZXNwb25zZS5kYXRhLnVzZXIuZW1haWwpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS50b2tlbiA9IGFuZ3VsYXIudG9Kc29uKHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2V2ZW50cycpO1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xvZ2dlZCBJbicpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3dTaW1wbGUocmVzcG9uc2UuZGF0YS5lcnJvcilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICApXG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgZm9yIG1haW4gdG9vbGJhclxuYXBwLmNvbnRyb2xsZXIoJ3Rvb2xiYXInLCBbJyRyb290U2NvcGUnLCckc2NvcGUnLCAnJHdpbmRvdycsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHdpbmRvdyl7XG4gICAgJHNjb3BlLnVzZXIgPSAkd2luZG93LnNlc3Npb25TdG9yYWdlO1xuICAgICRzY29wZS5wYXRocyA9IHRydWU7XG4gICAgJHJvb3RTY29wZS4kb24oJ2xvZ2dlZCBJbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKCR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICRzY29wZS5wYXRocyA9IHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJHNjb3BlLnBhdGhzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KVxuXG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdyZXNldCcsWyckc2NvcGUnLCAnJGh0dHAnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uKXtcbiAgICAkc2NvcGUuY2hhbmdlUGFzcyA9IGZ1bmN0aW9uKHBhc3N3b3JkLCBjb25maXJtKXtcbiAgICAgICAgY29uc29sZS5sb2cocGFzc3dvcmQpO1xuICAgICAgICB2YXIgdG9rZW4gPSAkcm91dGVQYXJhbXMudG9rZW47XG4gICAgICAgIGlmKHBhc3N3b3JkID09PSBjb25maXJtKXtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9yZXNldCcsIHtwYXNzd29yZDogcGFzc3dvcmQsIHRva2VuOiB0b2tlbn0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1dKTtcblxuLy9jb250cm9sbGVyIGZvciB0aGUgbG9nb3V0IGZ1bmN0aW9uYWxpdHlcbmFwcC5jb250cm9sbGVyKCdsb2dvdXQnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywnJGxvY2F0aW9uJywgJyRpbnRlcnZhbCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCAkaW50ZXJ2YWwpe1xuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ291dCcpO1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xvZ2dlZCBJbicpO1xuICAgICAgICAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICAgIH0sIDMwMDAsIDEpXG4gICAgfTtcbn1dKTtcblxuLy9kaXJlY3RpdmUgdG8gY2hlY2sgdGhlIHBhc3N3b3JkcyBhcmUgdGhlIHNhbWVcbmFwcC5kaXJlY3RpdmUoJ3ZlcmlmeVNhbWUnLCBmdW5jdGlvbigpe1xuICAgICAgIHJldHVybiB7XG4gICAgICAgICAgIHJlcXVpcmU6IFwibmdNb2RlbFwiLFxuICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgb3RoZXJNb2RlbFZhbHVlOiBcIj1jb21wYXJlVG9cIlxuICAgICAgICAgICB9LFxuICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgbmdNb2RlbCkge1xuXG4gICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmNvbXBhcmVUbyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZSA9PSBzY29wZS5vdGhlck1vZGVsVmFsdWU7XG4gICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goXCJwYXNzd29yZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgIH1cbiAgICAgICB9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ2V2ZW50c0N0cmwnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgdGhpcy50aWxlcyA9IGJ1aWxkR3JpZE1vZGVsKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIkV2ZW50IFRpdGxlXCIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIlwiXG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBidWlsZEdyaWRNb2RlbCh0aWxlVG1wbCl7XG4gICAgICAgICAgICB2YXIgaXQsIHJlc3VsdHMgPSBbIF07XG4gICAgICAgICAgICAgICAgaXQgPSBhbmd1bGFyLmV4dGVuZCh7fSx0aWxlVG1wbCk7XG4gICAgICAgICAgICAgICAgaXQudGl0bGUgPSBpdC50aXRsZTtcbiAgICAgICAgICAgICAgICBpdC5zcGFuICA9IHsgcm93IDogMSwgY29sIDogMSB9O1xuICAgICAgICAgICAgICAgIGl0LmJhY2tncm91bmQgPSBcImdyYXlcIjtcbiAgICAgICAgICAgICAgICBpdC5zcGFuLnJvdyA9IGl0LnNwYW4uY29sID0gMTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChpdCk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9XG4gICAgfSk7XG4iLCJhcHAuY29udHJvbGxlcignZ2VuZXJhdGVDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG5cbiAgICAvLyB0aW1lIGV4cGVyaW1lbnRzXG4gICAgdmFyIHN0YXJ0VGltZSA9IG1vbWVudCgnMTowMCBQTScsICdoOm1tIEEnKS5mb3JtYXQoJ0hIOm1tJyk7XG4gICAgdmFyIGVuZFRpbWUgPSBtb21lbnQoJzQ6MDAgUE0nLCAnaDptbSBBJykuZm9ybWF0KCdISDptbScpO1xuICAgIHZhciBldmVudExlbmd0aCA9IG1vbWVudChlbmRUaW1lLCAnSEg6bW0nKS5kaWZmKG1vbWVudChzdGFydFRpbWUsICdISDptbScpLCAnbWludXRlcycpO1xuICAgIHZhciBzbG90TGVuZ3RoID0gbW9tZW50LmR1cmF0aW9uKChldmVudExlbmd0aCAvIDkpLCAnbWludXRlcycpLmFzTWludXRlcygpO1xuICAgIGNvbnNvbGUubG9nKG1vbWVudChzdGFydFRpbWUsICdISDptbScpLmFkZCgoc2xvdExlbmd0aCAqIDgpLCAnbWludXRlcycpLmZvcm1hdCgnaDptbSBBJykpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBVSSBHcmlkIHZhcmlhYmxlc1xuICAgIHZhciBncmlkQ29scyA9IFtdO1xuICAgIHZhciBncmlkRGF0YSA9IFtdO1xuXG4gICAgLy8gVUkgR3JpZCBvcHRpb25zXG4gICAgJHNjb3BlLmdyaWRPcHRpb25zID0ge1xuICAgICAgICBlbmFibGVTb3J0aW5nOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlR3JpZE1lbnU6IHRydWUsXG4gICAgICAgIGVuYWJsZUZpbHRlcmluZzogZmFsc2UsXG4gICAgICAgIG9uUmVnaXN0ZXJBcGk6IGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaSA9IGdyaWRBcGk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gXCJHZW5lcmF0ZVwiIGJ1dHRvbiBjbGljayBmdW5jdGlvblxuICAgICRzY29wZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyByZXF1ZXN0IG1hdGNoZXMgZnJvbSBzZXJ2ZXIgZ2l2ZW4gZXZlbnQgc2V0dGluZ3NcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90ZXN0J1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXG4gICAgICAgICAgICAvLyBlbXB0eSB0aGUgVUkgR3JpZCB2YXJpYWJsZXMgaW4gY2FzZSB0aGVyZSBpcyBkYXRhXG4gICAgICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMuY29sdW1uRGVmcyA9IFtdO1xuICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zLmRhdGEgPSBbXTtcbiAgICAgICAgICAgIGdyaWRDb2xzID0gW107XG4gICAgICAgICAgICBncmlkRGF0YSA9IFtdO1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlIGxvZyBBUEkgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGludGVydmlld2VyIGFycmF5IHdpdGhpbiB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgIC8vIGNyZWF0ZSB2YXJpb3VzIGFycmF5cyBhbmQgb2JqZWN0cyB0byBtZWV0IFVJIEdyaWQgZGF0YSByZXF1aXJlbWVudHNcbiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW50ZXJ2aWV3ZXIuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBwb3MpIHtcblxuICAgICAgICAgICAgICAgIC8vIHB1c2ggdGhlIGNvbXBhbnkgYW5kIGludGVydmlld2VyIG5hbWUgaW50byB0aGUgY29sdW1uIG5hbWVzIGFycmF5XG4gICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGJlIHRoZSBjb2x1bW4gaGVhZGVyIGZvciBhIHBhcnRpY3VsYXIgaW50ZXJ2aWV3ZXJcbiAgICAgICAgICAgICAgICBncmlkQ29scy5wdXNoKHtuYW1lOiBpdGVtLmNvbXBhbnkgKyAnIC8gJyArIGl0ZW0uZk5hbWUsIGZpZWxkOiBpdGVtLmNvbXBhbnkgKyAnXycgKyBpdGVtLm5hbWUsIHdpZHRoOjE1MCwgZGlzcGxheU5hbWU6IGl0ZW0uY29tcGFueSArICcgLyAnICsgaXRlbS5mTmFtZX0pO1xuXG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBzY2hlZHVsZWQgb2JqZWN0IHRvIGEgdmFyaWFibGVcbiAgICAgICAgICAgICAgICAvLyB0aGlzIG9iamVjdCBjb250YWlucyB0aGUgZW50aXJlIHNjaGVkdWxlIGZvciBhbiBpbnRlcnZpZXdlclxuICAgICAgICAgICAgICAgIHZhciBzY2hlZCA9IGl0ZW0uc2NoZWR1bGVkO1xuXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhdGUgYW4gZW1wdHkgc3R1ZGVudHMgYXJyYXlcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgYmUgdXNlZCB0byBzdG9yZSB0aGUgZm9ybWF0dGVkIHNjaGVkdWxlIGZvciBlYWNoIGNvbXBhbnlcbiAgICAgICAgICAgICAgICB2YXIgc3R1ZGVudHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgc2NoZWR1bGVkIG9iamVjdCB1c2luZyB0aGUgZ2V0T3duUHJvcGVydHlOYW1lcyBtZXRob2RcbiAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzY2hlZCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgY29udGFpbnMgZWFjaCBzY2hlZHVsZWQgaXRlbVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFycmF5IHdpbGwgY29udGFpbiB0aGUgZm9ybWF0dGVkIHNjaGVkdWxlIGZvciBhbiBpbnRlcnZpZXdlclxuICAgICAgICAgICAgICAgICAgICB0aXRsZU9iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB0aXRsZU9ialtpdGVtLmNvbXBhbnkgKyAnXycgKyBpdGVtLmZuYW1lXSA9IHNjaGVkW2VsZW1dO1xuICAgICAgICAgICAgICAgICAgICBzdHVkZW50cy5wdXNoKHRpdGxlT2JqKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBwdXNoIHRoZSB1cGRhdGVkIHNjaGVkdWxlIGFycmF5IGludG8gdGhlIG1hc3RlciBncmlkRGF0YSBhcnJheVxuICAgICAgICAgICAgZ3JpZERhdGEucHVzaChzdHVkZW50cyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gZ3JpZERhdGEgaXMgc3RpbGwgbm90IGNvcnJlY3RseSBmb3JtYXR0ZWRcbiAgICAgICAgICAgIC8vIGVhY2ggaXRlbSByZXByZXNlbnRzIGFuIGludGVydmlld2VyIGNvbHVtblxuICAgICAgICAgICAgLy8gd2hlbiBpbiBmYWN0LCBVSSBHcmlkIHJlcXVpcmVzIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgdG8gYmUgYSByb3cgb2YgZGF0YVxuICAgICAgICAgICAgLy8gVW5kZXJzY29yZSB1bnppcCBmdW5jdGlvbiBwZXJmb3JtcyBuZWNlc3NhcnkgbWF0cml4IHRyYW5zZm9ybWF0aW9uXG4gICAgICAgICAgICBncmlkRGF0YSA9IF8udW56aXAoZ3JpZERhdGEpO1xuXG4gICAgICAgICAgICAvLyBpbml0aWF0ZSBlbXB0eSBhcnJheSB0byBzdG9yZSBlYWNoIHJvdyBhcyBhbiBvYmplY3Qgb2Ygb2JqZWN0c1xuICAgICAgICAgICAgdmFyIGdyaWRBcnIgPSBbXTtcblxuICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHVuemlwcGVkIGdyaWREYXRhXG4gICAgICAgICAgICBncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBwb3MpIHtcblxuICAgICAgICAgICAgICAgIC8vIGluaXRpYXRlIGVtcHR5IG9iamVjdCBmb3Igc3RvcmluZyBpbmRpdmlkdWFsIHNjaGVkdWxlIGl0ZW1zXG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHt9O1xuXG4gICAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBzY2hlZHVsZSByb3dcbiAgICAgICAgICAgICAgICAvLyBlYWNoIGl0ZW0gaW4gdGhlIHJvdyBhcnJheSByZXByZXNlbnRzIGEgc2luZ2xlIGNlbGwgaW4gdGhlIGdyaWRcbiAgICAgICAgICAgICAgICBpdGVtLmZvckVhY2goZnVuY3Rpb24gKGVsZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSBVbmRlcnNjb3JlIGV4dGVuZCBtZXRob2QgdG8gXCJwdXNoXCIgZWFjaCBpdGVtIGludG8gcm93IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICBfLmV4dGVuZChyb3dPYmosIGVsZW0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gcHVzaCB0aGUgcm93IG9iamVjdCBpbnRvIHRoZSBwcmV2aW91c2x5IGluaXRpYXRlZCBncmlkIGFycmF5XG4gICAgICAgICAgICAgICAgZ3JpZEFyci5wdXNoKHJvd09iaik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gaW5pdGlhdGUgYW4gZW1wdHkgb2JqZWN0IGZvciBzdG9yaW5nIHRoZSBlbnRpcmUgc2NoZWR1bGVcbiAgICAgICAgICAgIGdyaWRPYmogPSB7fTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIHRpbWUgc2xvdHMgY29sdW1uXG4gICAgICAgICAgICB2YXIgdGltZVNsb3RzID0gW107XG4gICAgICAgICAgICB2YXIgc2xvdHNTaXplID0gZ3JpZEFyci5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZShzbG90c1NpemUtLSkge1xuICAgICAgICAgICAgICAgIHRpbWVTbG90cy5wdXNoKHt0aW1lOiAnU2xvdCAnICsgKChncmlkQXJyLmxlbmd0aCkgLSBzbG90c1NpemUpfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRpbWVTbG90cyk7XG5cbiAgICAgICAgICAgIC8vIHVzaW5nIFVuZGVyc2NvcmUgZXh0ZW5kIGFnYWluLCBcInB1c2hcIiB0aGUgYXJyYXkgb2Ygb2JqZWN0cyBpbnRvIHRoZSBtYXN0ZXIgb2JqZWN0XG4gICAgICAgICAgICBfLmV4dGVuZChncmlkT2JqLCBncmlkQXJyKTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBncmlkRGF0YSB2YXJpYWJsZVxuICAgICAgICAgICAgZ3JpZERhdGEgPSBncmlkQXJyO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBhZnRlciBjYXB0dXJpbmcgYW5kIGZvcm1hdHRpbmcgdGhlIGRhdGEsIHVwZGF0ZSBVSSBHcmlkIG9wdGlvbnNcbiAgICAgICAgICAgICRzY29wZS5ncmlkT3B0aW9ucy5jb2x1bW5EZWZzID0gZ3JpZENvbHM7XG4gICAgICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMuZGF0YSA9IGdyaWREYXRhO1xuICAgICAgICB9KVxuICAgIH07XG59XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
