var app=angular.module("app",["ngMaterial","ngRoute","ui.grid","ui.grid.edit","ui.grid.rowEdit","ui.grid.exporter"]);app.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode({enabled:!0}),e.when("/home",{templateUrl:"views/partials/home.html"}).when("/",{templateUrl:"views/partials/login/login.html"}).when("/forgot",{templateUrl:"views/partials/forgot/forgot.html"}).when("/events",{templateUrl:"views/partials/events/events.html"}).when("/students",{templateUrl:"views/partials/students/students.html"}).when("/interviewers",{templateUrl:"views/partials/interviewers/interviewers.html"}).when("/archived-events",{templateUrl:"views/partials/archived-events/archived-events.html"}).when("/profile",{templateUrl:"views/partials/profile/profile.html"}).when("/logout",{templateUrl:"views/partials/logout/logout.html"}).when("/new-event",{templateUrl:"views/partials/new-event/new-event.html"}).when("/event",{templateUrl:"views/partials/event/event.html"}).when("/:token",{templateUrl:"views/partials/reset/reset.html",controller:"reset"}).otherwise({redirectTo:"/views/partials/login.html"})}]),app.controller("student",["$scope","$mdDialog",function(e,t){function o(e){e.close=function(){t.hide(),e.companies=[{name:"Prime"},{name:"Nerdery"},{name:"Digital People"}],e.events=[{name:"mocks Delta"},{name:"career Delta"},{name:"mocks Epsilon"}]}}e.openStudents=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/student.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("interviewer",["$scope","$mdDialog",function(e,t){e.openInterviewer=function(e){t.show({controller:"addInterviewer",templateUrl:"views/partials/dialogs/interviewer.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("uploads",["$scope","$mdDialog",function(e,t){function o(e,t){e.close=function(){t.hide()}}e.openUploads=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/upload.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("registerOpen",["$scope","$mdDialog","$http",function(e,t){function o(e,t,o){e.register=function(e,n,a){t.post("/api/users",{username:e,email:n,password:a}).then(function(e){console.log(e),200==e&&o.hide()})},e.close=function(){o.hide()}}e.openRegister=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/register.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("sendEmail",["$scope","$http","$location",function(e,t,o){e.send=function(e){t.post("/forgot",{email:e}).then(function(e){200==e.status&&o.path("/")})}}]),app.controller("login",["$rootScope","$scope","$http","$location","$mdToast",function(e,t,o,n,a){t.submit=function(t,r){o.post("/authenticate",{username:t,password:r}).then(function(t){t.data.token?(sessionStorage.username=angular.toJson(t.data.user.username),sessionStorage.email=angular.toJson(t.data.user.email),sessionStorage.token=angular.toJson(t.data.token),n.path("/events"),e.$broadcast("logged In")):a.showSimple(t.data.error)})}}]),app.controller("toolbar",["$rootScope","$scope","$window",function(e,t,o){t.user=o.sessionStorage,t.paths=!0,e.$on("logged In",function(){void 0==o.sessionStorage.token?t.paths=!0:t.paths=!1})}]),app.controller("reset",["$scope","$http","$routeParams","$location",function(e,t,o,n){e.changePass=function(e,a){console.log(e);var r=o.token;e===a&&t.post("/reset",{password:e,token:r}).then(function(e){console.log(e),200===e.status&&n.path("/")})}}]),app.controller("logout",["$rootScope","$scope","$location","$interval",function(e,t,o,n){t.logout=function(){o.path("/logout"),sessionStorage.clear(),e.$broadcast("logged In"),n(function(){o.path("/")},3e3,1)}}]),app.directive("verifySame",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("password",function(){n.$validate()})}}}),app.controller("generateCtrl",["$scope","$http",function(e,t){var o=moment("1:00 PM","h:mm A").format("HH:mm"),n=moment("4:00 PM","h:mm A").format("HH:mm"),a=moment(n,"HH:mm").diff(moment(o,"HH:mm"),"minutes"),r=moment.duration(a/9,"minutes").asMinutes();console.log(moment(o,"HH:mm").add(8*r,"minutes").format("h:mm A"));var l=[],i=[];e.gridOptions={enableSorting:!1,enableGridMenu:!0,enableFiltering:!1,onRegisterApi:function(t){e.gridApi=t}},e.generate=function(){t({method:"GET",url:"http://localhost:3000/test"}).then(function(t){e.gridOptions.columnDefs=[],e.gridOptions.data=[],l=[],i=[],console.log(t),t.data.interviewer.forEach(function(e,t){l.push({name:e.company+" / "+e.fName,field:e.company+"_"+e.name,width:150,displayName:e.company+" / "+e.fName});var o=e.scheduled,n=[];Object.getOwnPropertyNames(o).forEach(function(t,a,r){titleObj={},titleObj[e.company+"_"+e.fname]=o[t],n.push(titleObj)}),i.push(n)}),i=_.unzip(i);var o=[];i.forEach(function(e,t){var n={};e.forEach(function(e,t){_.extend(n,e)}),o.push(n)}),gridObj={};for(var n=[],a=o.length;a--;)n.push({time:"Slot "+(o.length-a)});console.log(n),_.extend(gridObj,o),i=o}).then(function(){e.gridOptions.columnDefs=l,e.gridOptions.data=i})}}]),angular.module("app").controller("eventsCtrl",function(e){function t(e){var t,o=[];return t=angular.extend({},e),t.title=t.title,t.span={row:1,col:1},t.background="gray",t.span.row=t.span.col=1,o.push(t),o}this.tiles=t({title:"Event Title",background:""})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImV2ZW50L2V2ZW50LmNvbnRyb2xsZXIuanMiLCJldmVudHMvZXZlbnRzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCIkc2NvcGUiLCIkbWREaWFsb2ciLCJhZGRTdHVkZW50IiwiY2xvc2UiLCJoaWRlIiwiY29tcGFuaWVzIiwibmFtZSIsImV2ZW50cyIsIm9wZW5TdHVkZW50cyIsImV2Iiwic2hvdyIsInBhcmVudCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImJvZHkiLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJvcGVuSW50ZXJ2aWV3ZXIiLCJ1cGxvYWRGaWxlIiwib3BlblVwbG9hZHMiLCJyZWdpc3RlciIsIiRodHRwIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJvcGVuUmVnaXN0ZXIiLCIkbG9jYXRpb24iLCJzZW5kIiwic3RhdHVzIiwicGF0aCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsInN1Ym1pdCIsImRhdGEiLCJ0b2tlbiIsInNlc3Npb25TdG9yYWdlIiwidG9Kc29uIiwidXNlciIsIiRicm9hZGNhc3QiLCJzaG93U2ltcGxlIiwiZXJyb3IiLCIkd2luZG93IiwicGF0aHMiLCIkb24iLCJ1bmRlZmluZWQiLCIkcm91dGVQYXJhbXMiLCJjaGFuZ2VQYXNzIiwiY29uZmlybSIsIiRpbnRlcnZhbCIsImxvZ291dCIsImNsZWFyIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImF0dHJpYnV0ZXMiLCJuZ01vZGVsIiwiJHZhbGlkYXRvcnMiLCJjb21wYXJlVG8iLCJtb2RlbFZhbHVlIiwiJHdhdGNoIiwiJHZhbGlkYXRlIiwic3RhcnRUaW1lIiwibW9tZW50IiwiZm9ybWF0IiwiZW5kVGltZSIsImV2ZW50TGVuZ3RoIiwiZGlmZiIsInNsb3RMZW5ndGgiLCJkdXJhdGlvbiIsImFzTWludXRlcyIsImFkZCIsImdyaWRDb2xzIiwiZ3JpZERhdGEiLCJncmlkT3B0aW9ucyIsImVuYWJsZVNvcnRpbmciLCJlbmFibGVHcmlkTWVudSIsImVuYWJsZUZpbHRlcmluZyIsIm9uUmVnaXN0ZXJBcGkiLCJncmlkQXBpIiwiZ2VuZXJhdGUiLCJtZXRob2QiLCJ1cmwiLCJjb2x1bW5EZWZzIiwiaW50ZXJ2aWV3ZXIiLCJmb3JFYWNoIiwiaXRlbSIsInBvcyIsInB1c2giLCJjb21wYW55IiwiZk5hbWUiLCJmaWVsZCIsIndpZHRoIiwiZGlzcGxheU5hbWUiLCJzY2hlZCIsInNjaGVkdWxlZCIsInN0dWRlbnRzIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImVsZW0iLCJpbmRleCIsImFycmF5IiwidGl0bGVPYmoiLCJmbmFtZSIsIl8iLCJ1bnppcCIsImdyaWRBcnIiLCJyb3dPYmoiLCJleHRlbmQiLCJncmlkT2JqIiwidGltZVNsb3RzIiwic2xvdHNTaXplIiwibGVuZ3RoIiwidGltZSIsImJ1aWxkR3JpZE1vZGVsIiwidGlsZVRtcGwiLCJpdCIsInJlc3VsdHMiLCJ0aXRsZSIsInNwYW4iLCJyb3ciLCJjb2wiLCJiYWNrZ3JvdW5kIiwidGhpcyIsInRpbGVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQUEsYUFBQSxVQUFBLFVBQUEsZUFBQSxrQkFBQSxvQkFDQUYsS0FBQUcsUUFBQSxpQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxHQUNBQSxFQUFBQyxXQUNBQyxTQUFBLElBRUFILEVBQ0FJLEtBQUEsU0FDQUMsWUFBQSw2QkFFQUQsS0FBQSxLQUNBQyxZQUFBLG9D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LElBQUFpQyxLQUdBakMsR0FBQVksUUFBQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFvQixLQUlBckIsR0FBQUQsUUFBQSxTQUFBYyxFQUFBQyxHQUVBSSxFQUFBSSxPQUFBRCxFQUFBUixLQUlBTyxFQUFBbEIsS0FBQW1CLEtBSUFFLFVBS0EsS0FGQSxHQUFBQyxNQUNBQyxFQUFBTCxFQUFBTSxPQUNBRCxLQUNBRCxFQUFBdEIsTUFBQXlCLEtBQUEsU0FBQVAsRUFBQSxPQUFBSyxJQUdBekYsU0FBQUMsSUFBQXVGLEdBR0FOLEVBQUFJLE9BQUFDLFFBQUFILEdBR0FqQyxFQUFBaUMsSUFDQXRGLEtBQUEsV0FHQTFCLEVBQUFnRixZQUFBUyxXQUFBWCxFQUNBOUUsRUFBQWdGLFlBQUExQyxLQUFBeUMsUUNySEEzRixRQUFBQyxPQUFBLE9BQUFRLFdBQUEsYUFBQSxTQUFBRyxHQUtBLFFBQUF3SCxHQUFBQyxHQUNBLEdBQUFDLEdBQUFDLElBU0EsT0FSQUQsR0FBQXRJLFFBQUE4SCxVQUFBTyxHQUNBQyxFQUFBRSxNQUFBRixFQUFBRSxNQUNBRixFQUFBRyxNQUFBQyxJQUFBLEVBQUFDLElBQUEsR0FDQUwsRUFBQU0sV0FBQSxPQUNBTixFQUFBRyxLQUFBQyxJQUFBSixFQUFBRyxLQUFBRSxJQUFBLEVBRUFKLEVBQUE3QixLQUFBNEIsR0FFQUMsRUFkQU0sS0FBQUMsTUFBQVYsR0FDQUksTUFBQSxjQUNBSSxXQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdNYXRlcmlhbCcsICduZ1JvdXRlJywgJ3VpLmdyaWQnLCAndWkuZ3JpZC5lZGl0JywgJ3VpLmdyaWQucm93RWRpdCcsICd1aS5ncmlkLmV4cG9ydGVyJ10pO1xuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgfSk7XG4gICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgIHdoZW4oJy9ob21lJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9ob21lLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9sb2dpbi9sb2dpbi5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2ZvcmdvdCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZm9yZ290L2ZvcmdvdC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2V2ZW50cycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZXZlbnRzL2V2ZW50cy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL3N0dWRlbnRzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9zdHVkZW50cy9zdHVkZW50cy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2ludGVydmlld2VycycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvaW50ZXJ2aWV3ZXJzL2ludGVydmlld2Vycy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2FyY2hpdmVkLWV2ZW50cycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvYXJjaGl2ZWQtZXZlbnRzL2FyY2hpdmVkLWV2ZW50cy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL3Byb2ZpbGUnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL3Byb2ZpbGUvcHJvZmlsZS5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2xvZ291dCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvbG9nb3V0L2xvZ291dC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL25ldy1ldmVudCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvbmV3LWV2ZW50L25ldy1ldmVudC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2V2ZW50Jywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9ldmVudC9ldmVudC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignLzp0b2tlbicsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvcmVzZXQvcmVzZXQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncmVzZXQnXG4gICAgICAgIH0pLlxuICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy92aWV3cy9wYXJ0aWFscy9sb2dpbi5odG1sJ1xuICAgIH0pXG59XSk7XG5cbi8vU3R1ZGVudCBEaWFsb2cgQ29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3N0dWRlbnQnLCBbJyRzY29wZScsICckbWREaWFsb2cnLCBmdW5jdGlvbigkc2NvcGUsJG1kRGlhbG9nKXtcbiAgICAkc2NvcGUub3BlblN0dWRlbnRzID0gZnVuY3Rpb24oZXYpe1xuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICBjb250cm9sbGVyOiBhZGRTdHVkZW50LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9kaWFsb2dzL3N0dWRlbnQuZGlhbG9nLmh0bWwnLFxuICAgICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXG4gICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBmdW5jdGlvbiBhZGRTdHVkZW50KCRzY29wZSkge1xuICAgICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICAgICAgJHNjb3BlLmNvbXBhbmllcyA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ1ByaW1lJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdOZXJkZXJ5J30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdEaWdpdGFsIFBlb3BsZSd9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgJHNjb3BlLmV2ZW50cyA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ21vY2tzIERlbHRhJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdjYXJlZXIgRGVsdGEnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ21vY2tzIEVwc2lsb24nfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cblxufV0pO1xuXG4vL0ludGVydmlld2VyIERpYWxvZyBDb250cm9sbGVyXG5hcHAuY29udHJvbGxlcignaW50ZXJ2aWV3ZXInLCBbJyRzY29wZScsICckbWREaWFsb2cnLCBmdW5jdGlvbigkc2NvcGUsICRtZERpYWxvZyl7XG4gICAgJHNjb3BlLm9wZW5JbnRlcnZpZXdlciA9IGZ1bmN0aW9uKGV2KXtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ2FkZEludGVydmlld2VyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZGlhbG9ncy9pbnRlcnZpZXdlci5kaWFsb2cuaHRtbCcsXG4gICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWVcbiAgICAgICAgfSlcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGFkZEludGVydmlld2VyKCRzY29wZSwgJG1kRGlhbG9nKXtcbiAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgIH07XG4gICAgJHNjb3BlLmNvaG9ydHMgPSBbXG4gICAgICAgIHtuYW1lOiAnRGVsdGEnfSxcbiAgICAgICAge25hbWU6ICdnYW1tYSd9LFxuICAgICAgICB7bmFtZTogJ0Vwc2lsb24nfVxuICAgIF07XG4gICAgJHNjb3BlLmV2ZW50cyA9IFtcbiAgICAgICAge25hbWU6ICdtb2NrcyBEZWx0YSd9LFxuICAgICAgICB7bmFtZTogJ2NhcmVlciBEZWx0YSd9LFxuICAgICAgICB7bmFtZTogJ21vY2tzIEVwc2lsb24nfVxuICAgIF1cbiAgICB9XG59XSk7XG5cbi8vVXBsb2FkIERpYWxvZyBjb250cm9sbGVyXG5hcHAuY29udHJvbGxlcigndXBsb2FkcycsIFsnJHNjb3BlJywgJyRtZERpYWxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJG1kRGlhbG9nKXtcbiAgICAkc2NvcGUub3BlblVwbG9hZHMgPSBmdW5jdGlvbihldil7XG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHVwbG9hZEZpbGUsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2RpYWxvZ3MvdXBsb2FkLmRpYWxvZy5odG1sJyxcbiAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuICAgICAgICB9KVxuICAgIH07XG4gICAgZnVuY3Rpb24gdXBsb2FkRmlsZSgkc2NvcGUsICRtZERpYWxvZyl7XG4gICAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1dKTtcblxuLy9jb250cm9sbGVyIGZvciB0aGUgcmVnaXN0cmF0aW9uIGFsc28gc2VuZHMgcG9zdCB0byBjcmVhdGUgYSB1c2VyXG5hcHAuY29udHJvbGxlcigncmVnaXN0ZXJPcGVuJywgWyckc2NvcGUnLCAnJG1kRGlhbG9nJywgJyRodHRwJywgZnVuY3Rpb24oJHNjb3BlLCAkbWREaWFsb2cpe1xuICAgICRzY29wZS5vcGVuUmVnaXN0ZXIgPSBmdW5jdGlvbihldil7XG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHJlZ2lzdGVyLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9kaWFsb2dzL3JlZ2lzdGVyLmRpYWxvZy5odG1sJyxcbiAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuICAgICAgICB9KVxuICAgIH07XG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIoJHNjb3BlLCAkaHR0cCwgJG1kRGlhbG9nKSB7XG4gICAgICAgICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQpe1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9O1xuICAgIH1cbn1dKTtcblxuLy9jb250cm9sbGVyIHRvIHNlbmQgcmVzZXQgZW1haWxcbmFwcC5jb250cm9sbGVyKCdzZW5kRW1haWwnLCBbJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9jYXRpb24pe1xuICAgICRzY29wZS5zZW5kID0gZnVuY3Rpb24oZW1haWwpIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2ZvcmdvdCcsIHtlbWFpbDogZW1haWx9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgdG8gc2VuZCBwYXNzd29yZCB0byBhdXRoZW50aWNhdGlvbiBhbmQgbG9naW4gdG8gd2Vic2l0ZSBvbiBjb25maXJtYXRpb25cbmFwcC5jb250cm9sbGVyKCdsb2dpbicsIFsnJHJvb3RTY29wZScsJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAnJG1kVG9hc3QnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRodHRwLCAkbG9jYXRpb24sICRtZFRvYXN0KXtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKXtcbiAgICAgICAgJGh0dHAucG9zdCgnL2F1dGhlbnRpY2F0ZScsIHt1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEudG9rZW4pe1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS51c2VybmFtZSA9IGFuZ3VsYXIudG9Kc29uKHJlc3BvbnNlLmRhdGEudXNlci51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLmVtYWlsID0gYW5ndWxhci50b0pzb24ocmVzcG9uc2UuZGF0YS51c2VyLmVtYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UudG9rZW4gPSBhbmd1bGFyLnRvSnNvbihyZXNwb25zZS5kYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ldmVudHMnKTtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdsb2dnZWQgSW4nKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93U2ltcGxlKHJlc3BvbnNlLmRhdGEuZXJyb3IpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgKVxuICAgIH1cbn1dKTtcblxuLy9jb250cm9sbGVyIGZvciBtYWluIHRvb2xiYXJcbmFwcC5jb250cm9sbGVyKCd0b29sYmFyJywgWyckcm9vdFNjb3BlJywnJHNjb3BlJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3cpe1xuICAgICRzY29wZS51c2VyID0gJHdpbmRvdy5zZXNzaW9uU3RvcmFnZTtcbiAgICAkc2NvcGUucGF0aHMgPSB0cnVlO1xuICAgICRyb290U2NvcGUuJG9uKCdsb2dnZWQgSW4nLCBmdW5jdGlvbigpe1xuICAgICAgICBpZigkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuID09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAkc2NvcGUucGF0aHMgPSB0cnVlO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICRzY29wZS5wYXRocyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSlcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcigncmVzZXQnLFsnJHNjb3BlJywgJyRodHRwJywgJyRyb3V0ZVBhcmFtcycsICckbG9jYXRpb24nLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbil7XG4gICAgJHNjb3BlLmNoYW5nZVBhc3MgPSBmdW5jdGlvbihwYXNzd29yZCwgY29uZmlybSl7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhc3N3b3JkKTtcbiAgICAgICAgdmFyIHRva2VuID0gJHJvdXRlUGFyYW1zLnRva2VuO1xuICAgICAgICBpZihwYXNzd29yZCA9PT0gY29uZmlybSl7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvcmVzZXQnLCB7cGFzc3dvcmQ6IHBhc3N3b3JkLCB0b2tlbjogdG9rZW59KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XSk7XG5cbi8vY29udHJvbGxlciBmb3IgdGhlIGxvZ291dCBmdW5jdGlvbmFsaXR5XG5hcHAuY29udHJvbGxlcignbG9nb3V0JywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsJyRsb2NhdGlvbicsICckaW50ZXJ2YWwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRsb2NhdGlvbiwgJGludGVydmFsKXtcbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dvdXQnKTtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdsb2dnZWQgSW4nKTtcbiAgICAgICAgJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKVxuICAgICAgICB9LCAzMDAwLCAxKVxuICAgIH07XG59XSk7XG5cbi8vZGlyZWN0aXZlIHRvIGNoZWNrIHRoZSBwYXNzd29yZHMgYXJlIHRoZSBzYW1lXG5hcHAuZGlyZWN0aXZlKCd2ZXJpZnlTYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICByZXR1cm4ge1xuICAgICAgICAgICByZXF1aXJlOiBcIm5nTW9kZWxcIixcbiAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgIG90aGVyTW9kZWxWYWx1ZTogXCI9Y29tcGFyZVRvXCJcbiAgICAgICAgICAgfSxcbiAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMsIG5nTW9kZWwpIHtcblxuICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdG9ycy5jb21wYXJlVG8gPSBmdW5jdGlvbihtb2RlbFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUgPT0gc2NvcGUub3RoZXJNb2RlbFZhbHVlO1xuICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFwicGFzc3dvcmRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdGUoKTtcbiAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICB9XG4gICAgICAgfTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdnZW5lcmF0ZUN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApIHtcblxuICAgIC8vIHRpbWUgZXhwZXJpbWVudHNcbiAgICB2YXIgc3RhcnRUaW1lID0gbW9tZW50KCcxOjAwIFBNJywgJ2g6bW0gQScpLmZvcm1hdCgnSEg6bW0nKTtcbiAgICB2YXIgZW5kVGltZSA9IG1vbWVudCgnNDowMCBQTScsICdoOm1tIEEnKS5mb3JtYXQoJ0hIOm1tJyk7XG4gICAgdmFyIGV2ZW50TGVuZ3RoID0gbW9tZW50KGVuZFRpbWUsICdISDptbScpLmRpZmYobW9tZW50KHN0YXJ0VGltZSwgJ0hIOm1tJyksICdtaW51dGVzJyk7XG4gICAgdmFyIHNsb3RMZW5ndGggPSBtb21lbnQuZHVyYXRpb24oKGV2ZW50TGVuZ3RoIC8gOSksICdtaW51dGVzJykuYXNNaW51dGVzKCk7XG4gICAgY29uc29sZS5sb2cobW9tZW50KHN0YXJ0VGltZSwgJ0hIOm1tJykuYWRkKChzbG90TGVuZ3RoICogOCksICdtaW51dGVzJykuZm9ybWF0KCdoOm1tIEEnKSk7XG5cbiAgICAvLyBJbml0aWFsaXplIFVJIEdyaWQgdmFyaWFibGVzXG4gICAgdmFyIGdyaWRDb2xzID0gW107XG4gICAgdmFyIGdyaWREYXRhID0gW107XG5cbiAgICAvLyBVSSBHcmlkIG9wdGlvbnNcbiAgICAkc2NvcGUuZ3JpZE9wdGlvbnMgPSB7XG4gICAgICAgIGVuYWJsZVNvcnRpbmc6IGZhbHNlLFxuICAgICAgICBlbmFibGVHcmlkTWVudTogdHJ1ZSxcbiAgICAgICAgZW5hYmxlRmlsdGVyaW5nOiBmYWxzZSxcbiAgICAgICAgb25SZWdpc3RlckFwaTogZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICRzY29wZS5ncmlkQXBpID0gZ3JpZEFwaTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBcIkdlbmVyYXRlXCIgYnV0dG9uIGNsaWNrIGZ1bmN0aW9uXG4gICAgJHNjb3BlLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIHJlcXVlc3QgbWF0Y2hlcyBmcm9tIHNlcnZlciBnaXZlbiBldmVudCBzZXR0aW5nc1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3Rlc3QnXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIC8vIGVtcHR5IHRoZSBVSSBHcmlkIHZhcmlhYmxlcyBpbiBjYXNlIHRoZXJlIGlzIGRhdGFcbiAgICAgICAgICAgICRzY29wZS5ncmlkT3B0aW9ucy5jb2x1bW5EZWZzID0gW107XG4gICAgICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMuZGF0YSA9IFtdO1xuICAgICAgICAgICAgZ3JpZENvbHMgPSBbXTtcbiAgICAgICAgICAgIGdyaWREYXRhID0gW107XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUgbG9nIEFQSSByZXNwb25zZSBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cbiAgICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaW50ZXJ2aWV3ZXIgYXJyYXkgd2l0aGluIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgLy8gY3JlYXRlIHZhcmlvdXMgYXJyYXlzIGFuZCBvYmplY3RzIHRvIG1lZXQgVUkgR3JpZCBkYXRhIHJlcXVpcmVtZW50c1xuICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5pbnRlcnZpZXdlci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIHBvcykge1xuXG4gICAgICAgICAgICAgICAgLy8gcHVzaCB0aGUgY29tcGFueSBhbmQgaW50ZXJ2aWV3ZXIgbmFtZSBpbnRvIHRoZSBjb2x1bW4gbmFtZXMgYXJyYXlcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgYmUgdGhlIGNvbHVtbiBoZWFkZXIgZm9yIGEgcGFydGljdWxhciBpbnRlcnZpZXdlclxuICAgICAgICAgICAgICAgIGdyaWRDb2xzLnB1c2goe25hbWU6IGl0ZW0uY29tcGFueSArICcgLyAnICsgaXRlbS5mTmFtZSwgZmllbGQ6IGl0ZW0uY29tcGFueSArICdfJyArIGl0ZW0ubmFtZSwgd2lkdGg6MTUwLCBkaXNwbGF5TmFtZTogaXRlbS5jb21wYW55ICsgJyAvICcgKyBpdGVtLmZOYW1lfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHNjaGVkdWxlZCBvYmplY3QgdG8gYSB2YXJpYWJsZVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgb2JqZWN0IGNvbnRhaW5zIHRoZSBlbnRpcmUgc2NoZWR1bGUgZm9yIGFuIGludGVydmlld2VyXG4gICAgICAgICAgICAgICAgdmFyIHNjaGVkID0gaXRlbS5zY2hlZHVsZWQ7XG5cbiAgICAgICAgICAgICAgICAvLyBpbml0aWF0ZSBhbiBlbXB0eSBzdHVkZW50cyBhcnJheVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBiZSB1c2VkIHRvIHN0b3JlIHRoZSBmb3JtYXR0ZWQgc2NoZWR1bGUgZm9yIGVhY2ggY29tcGFueVxuICAgICAgICAgICAgICAgIHZhciBzdHVkZW50cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBzY2hlZHVsZWQgb2JqZWN0IHVzaW5nIHRoZSBnZXRPd25Qcm9wZXJ0eU5hbWVzIG1ldGhvZFxuICAgICAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHNjaGVkKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGFycmF5IG9mIG9iamVjdHMgdGhhdCBjb250YWlucyBlYWNoIHNjaGVkdWxlZCBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgYXJyYXkgd2lsbCBjb250YWluIHRoZSBmb3JtYXR0ZWQgc2NoZWR1bGUgZm9yIGFuIGludGVydmlld2VyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlT2JqID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlT2JqW2l0ZW0uY29tcGFueSArICdfJyArIGl0ZW0uZm5hbWVdID0gc2NoZWRbZWxlbV07XG4gICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLnB1c2godGl0bGVPYmopO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHB1c2ggdGhlIHVwZGF0ZWQgc2NoZWR1bGUgYXJyYXkgaW50byB0aGUgbWFzdGVyIGdyaWREYXRhIGFycmF5XG4gICAgICAgICAgICBncmlkRGF0YS5wdXNoKHN0dWRlbnRzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBncmlkRGF0YSBpcyBzdGlsbCBub3QgY29ycmVjdGx5IGZvcm1hdHRlZFxuICAgICAgICAgICAgLy8gZWFjaCBpdGVtIHJlcHJlc2VudHMgYW4gaW50ZXJ2aWV3ZXIgY29sdW1uXG4gICAgICAgICAgICAvLyB3aGVuIGluIGZhY3QsIFVJIEdyaWQgcmVxdWlyZXMgZWFjaCBpdGVtIGluIHRoZSBhcnJheSB0byBiZSBhIHJvdyBvZiBkYXRhXG4gICAgICAgICAgICAvLyBVbmRlcnNjb3JlIHVuemlwIGZ1bmN0aW9uIHBlcmZvcm1zIG5lY2Vzc2FyeSBtYXRyaXggdHJhbnNmb3JtYXRpb25cbiAgICAgICAgICAgIGdyaWREYXRhID0gXy51bnppcChncmlkRGF0YSk7XG5cbiAgICAgICAgICAgIC8vIGluaXRpYXRlIGVtcHR5IGFycmF5IHRvIHN0b3JlIGVhY2ggcm93IGFzIGFuIG9iamVjdCBvZiBvYmplY3RzXG4gICAgICAgICAgICB2YXIgZ3JpZEFyciA9IFtdO1xuXG4gICAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdW56aXBwZWQgZ3JpZERhdGFcbiAgICAgICAgICAgIGdyaWREYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIHBvcykge1xuXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhdGUgZW1wdHkgb2JqZWN0IGZvciBzdG9yaW5nIGluZGl2aWR1YWwgc2NoZWR1bGUgaXRlbXNcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0ge307XG5cbiAgICAgICAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIHNjaGVkdWxlIHJvd1xuICAgICAgICAgICAgICAgIC8vIGVhY2ggaXRlbSBpbiB0aGUgcm93IGFycmF5IHJlcHJlc2VudHMgYSBzaW5nbGUgY2VsbCBpbiB0aGUgZ3JpZFxuICAgICAgICAgICAgICAgIGl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoZWxlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdXNlIFVuZGVyc2NvcmUgZXh0ZW5kIG1ldGhvZCB0byBcInB1c2hcIiBlYWNoIGl0ZW0gaW50byByb3cgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIF8uZXh0ZW5kKHJvd09iaiwgZWxlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBwdXNoIHRoZSByb3cgb2JqZWN0IGludG8gdGhlIHByZXZpb3VzbHkgaW5pdGlhdGVkIGdyaWQgYXJyYXlcbiAgICAgICAgICAgICAgICBncmlkQXJyLnB1c2gocm93T2JqKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBpbml0aWF0ZSBhbiBlbXB0eSBvYmplY3QgZm9yIHN0b3JpbmcgdGhlIGVudGlyZSBzY2hlZHVsZVxuICAgICAgICAgICAgZ3JpZE9iaiA9IHt9O1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgdGltZSBzbG90cyBjb2x1bW5cbiAgICAgICAgICAgIHZhciB0aW1lU2xvdHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzbG90c1NpemUgPSBncmlkQXJyLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlKHNsb3RzU2l6ZS0tKSB7XG4gICAgICAgICAgICAgICAgdGltZVNsb3RzLnB1c2goe3RpbWU6ICdTbG90ICcgKyAoKGdyaWRBcnIubGVuZ3RoKSAtIHNsb3RzU2l6ZSl9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2codGltZVNsb3RzKTtcblxuICAgICAgICAgICAgLy8gdXNpbmcgVW5kZXJzY29yZSBleHRlbmQgYWdhaW4sIFwicHVzaFwiIHRoZSBhcnJheSBvZiBvYmplY3RzIGludG8gdGhlIG1hc3RlciBvYmplY3RcbiAgICAgICAgICAgIF8uZXh0ZW5kKGdyaWRPYmosIGdyaWRBcnIpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGdyaWREYXRhIHZhcmlhYmxlXG4gICAgICAgICAgICBncmlkRGF0YSA9IGdyaWRBcnI7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIGFmdGVyIGNhcHR1cmluZyBhbmQgZm9ybWF0dGluZyB0aGUgZGF0YSwgdXBkYXRlIFVJIEdyaWQgb3B0aW9uc1xuICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zLmNvbHVtbkRlZnMgPSBncmlkQ29scztcbiAgICAgICAgICAgICRzY29wZS5ncmlkT3B0aW9ucy5kYXRhID0gZ3JpZERhdGE7XG4gICAgICAgIH0pXG4gICAgfTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignZXZlbnRzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICB0aGlzLnRpbGVzID0gYnVpbGRHcmlkTW9kZWwoe1xuICAgICAgICAgICAgdGl0bGU6IFwiRXZlbnQgVGl0bGVcIixcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkR3JpZE1vZGVsKHRpbGVUbXBsKXtcbiAgICAgICAgICAgIHZhciBpdCwgcmVzdWx0cyA9IFsgXTtcbiAgICAgICAgICAgICAgICBpdCA9IGFuZ3VsYXIuZXh0ZW5kKHt9LHRpbGVUbXBsKTtcbiAgICAgICAgICAgICAgICBpdC50aXRsZSA9IGl0LnRpdGxlO1xuICAgICAgICAgICAgICAgIGl0LnNwYW4gID0geyByb3cgOiAxLCBjb2wgOiAxIH07XG4gICAgICAgICAgICAgICAgaXQuYmFja2dyb3VuZCA9IFwiZ3JheVwiO1xuICAgICAgICAgICAgICAgIGl0LnNwYW4ucm93ID0gaXQuc3Bhbi5jb2wgPSAxO1xuXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGl0KTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH1cbiAgICB9KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
