var app=angular.module("app",["ngMaterial","ngRoute","ui.grid","ui.grid.edit","ui.grid.rowEdit","ui.grid.exporter"]);app.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode({enabled:!0}),e.when("/home",{templateUrl:"views/partials/home.html"}).when("/",{templateUrl:"views/partials/login/login.html"}).when("/forgot",{templateUrl:"views/partials/forgot/forgot.html"}).when("/events",{templateUrl:"views/partials/events/events.html"}).when("/students",{templateUrl:"views/partials/students/students.html"}).when("/interviewers",{templateUrl:"views/partials/interviewers/interviewers.html"}).when("/archived-events",{templateUrl:"views/partials/archived-events/archived-events.html"}).when("/profile",{templateUrl:"views/partials/profile/profile.html"}).when("/logout",{templateUrl:"views/partials/logout/logout.html"}).when("/new-event",{templateUrl:"views/partials/new-event/new-event.html"}).when("/event",{templateUrl:"views/partials/event/event.html"}).when("/reset/:token",{controller:"reset",templateUrl:"views/partials/reset/reset.html"}).otherwise({redirectTo:"/"})}]),app.controller("student",["$scope","$mdDialog",function(e,t){function o(e){e.close=function(){t.hide(),e.companies=[{name:"Prime"},{name:"Nerdery"},{name:"Digital People"}],e.events=[{name:"mocks Delta"},{name:"career Delta"},{name:"mocks Epsilon"}]}}e.openStudents=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/student.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("interviewer",["$scope","$mdDialog",function(e,t){e.openInterviewer=function(e){t.show({controller:"addInterviewer",templateUrl:"views/partials/dialogs/interviewer.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("uploads",["$scope","$mdDialog",function(e,t){function o(e,t){e.close=function(){t.hide()}}e.openUploads=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/upload.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("registerOpen",["$scope","$mdDialog","$http",function(e,t){function o(e,t,o){e.register=function(e,n,a){t.post("/api/users",{username:e,email:n,password:a}).then(function(e){console.log(e),200==e&&o.hide()})},e.close=function(){o.hide()}}e.openRegister=function(e){t.show({controller:o,templateUrl:"views/partials/dialogs/register.dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}]),app.controller("sendEmail",["$scope","$http","$location",function(e,t,o){e.send=function(e){t.post("/forgot",{email:e}).then(function(e){200==e.status&&o.path("/")})}}]),app.controller("login",["$rootScope","$scope","$http","$location","$mdToast",function(e,t,o,n,a){t.submit=function(t,r){o.post("/authenticate",{username:t,password:r}).then(function(t){t.data.token?(sessionStorage.username=angular.toJson(t.data.user.username),sessionStorage.email=angular.toJson(t.data.user.email),sessionStorage.token=angular.toJson(t.data.token),n.path("/events"),e.$broadcast("logged In")):a.showSimple(t.data.error)})}}]),app.controller("toolbar",["$rootScope","$scope","$window",function(e,t,o){t.user=o.sessionStorage,t.paths=!0,e.$on("logged In",function(){void 0==o.sessionStorage.token?t.paths=!0:t.paths=!1})}]),app.controller("reset",["$scope","$http","$routeParams","$location",function(e,t,o,n){e.changePass=function(e,a){console.log(e);var r=o.token;e===a&&t.post("/reset",{password:e,token:r}).then(function(e){console.log(e),200===e.status&&n.path("/")})}}]),app.controller("logout",["$rootScope","$scope","$location","$interval",function(e,t,o,n){t.logout=function(){o.path("/logout"),sessionStorage.clear(),e.$broadcast("logged In"),n(function(){o.path("/")},3e3,1)}}]),app.directive("verifySame",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("password",function(){n.$validate()})}}}),app.controller("generateCtrl",["$scope","$http",function(e,t){var o=moment("1:00 PM","h:mm A").format("HH:mm"),n=moment("4:00 PM","h:mm A").format("HH:mm"),a=moment(n,"HH:mm").diff(moment(o,"HH:mm"),"minutes"),r=moment.duration(a/9,"minutes").asMinutes();console.log(moment(o,"HH:mm").add(8*r,"minutes").format("h:mm A"));var l=[],i=[];e.gridOptions={enableSorting:!1,enableGridMenu:!0,enableFiltering:!1,onRegisterApi:function(t){e.gridApi=t}},e.generate=function(){t({method:"GET",url:"http://localhost:3000/test"}).then(function(t){e.gridOptions.columnDefs=[],e.gridOptions.data=[],l=[],i=[],console.log(t),t.data.interviewer.forEach(function(e,t){l.push({name:e.company+" / "+e.fName,field:e.company+"_"+e.name,width:150,displayName:e.company+" / "+e.fName});var o=e.scheduled,n=[];Object.getOwnPropertyNames(o).forEach(function(t,a,r){titleObj={},titleObj[e.company+"_"+e.fname]=o[t],n.push(titleObj)}),i.push(n)}),i=_.unzip(i);var o=[];i.forEach(function(e,t){var n={};e.forEach(function(e,t){_.extend(n,e)}),o.push(n)}),gridObj={};for(var n=[],a=o.length;a--;)n.push({time:"Slot "+(o.length-a)});console.log(n),_.extend(gridObj,o),i=o}).then(function(){e.gridOptions.columnDefs=l,e.gridOptions.data=i})}}]),angular.module("app").controller("eventsCtrl",function(e){function t(e){var t,o=[];return t=angular.extend({},e),t.title=t.title,t.span={row:1,col:1},t.background="gray",t.span.row=t.span.col=1,o.push(t),o}this.tiles=t({title:"Event Title",background:""})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImV2ZW50L2V2ZW50LmNvbnRyb2xsZXIuanMiLCJldmVudHMvZXZlbnRzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCIkc2NvcGUiLCIkbWREaWFsb2ciLCJhZGRTdHVkZW50IiwiY2xvc2UiLCJoaWRlIiwiY29tcGFuaWVzIiwibmFtZSIsImV2ZW50cyIsIm9wZW5TdHVkZW50cyIsImV2Iiwic2hvdyIsInBhcmVudCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImJvZHkiLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJvcGVuSW50ZXJ2aWV3ZXIiLCJ1cGxvYWRGaWxlIiwib3BlblVwbG9hZHMiLCJyZWdpc3RlciIsIiRodHRwIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJvcGVuUmVnaXN0ZXIiLCIkbG9jYXRpb24iLCJzZW5kIiwic3RhdHVzIiwicGF0aCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsInN1Ym1pdCIsImRhdGEiLCJ0b2tlbiIsInNlc3Npb25TdG9yYWdlIiwidG9Kc29uIiwidXNlciIsIiRicm9hZGNhc3QiLCJzaG93U2ltcGxlIiwiZXJyb3IiLCIkd2luZG93IiwicGF0aHMiLCIkb24iLCJ1bmRlZmluZWQiLCIkcm91dGVQYXJhbXMiLCJjaGFuZ2VQYXNzIiwiY29uZmlybSIsIiRpbnRlcnZhbCIsImxvZ291dCIsImNsZWFyIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImF0dHJpYnV0ZXMiLCJuZ01vZGVsIiwiJHZhbGlkYXRvcnMiLCJjb21wYXJlVG8iLCJtb2RlbFZhbHVlIiwiJHdhdGNoIiwiJHZhbGlkYXRlIiwic3RhcnRUaW1lIiwibW9tZW50IiwiZm9ybWF0IiwiZW5kVGltZSIsImV2ZW50TGVuZ3RoIiwiZGlmZiIsInNsb3RMZW5ndGgiLCJkdXJhdGlvbiIsImFzTWludXRlcyIsImFkZCIsImdyaWRDb2xzIiwiZ3JpZERhdGEiLCJncmlkT3B0aW9ucyIsImVuYWJsZVNvcnRpbmciLCJlbmFibGVHcmlkTWVudSIsImVuYWJsZUZpbHRlcmluZyIsIm9uUmVnaXN0ZXJBcGkiLCJncmlkQXBpIiwiZ2VuZXJhdGUiLCJtZXRob2QiLCJ1cmwiLCJjb2x1bW5EZWZzIiwiaW50ZXJ2aWV3ZXIiLCJmb3JFYWNoIiwiaXRlbSIsInBvcyIsInB1c2giLCJjb21wYW55IiwiZk5hbWUiLCJmaWVsZCIsIndpZHRoIiwiZGlzcGxheU5hbWUiLCJzY2hlZCIsInNjaGVkdWxlZCIsInN0dWRlbnRzIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImVsZW0iLCJpbmRleCIsImFycmF5IiwidGl0bGVPYmoiLCJmbmFtZSIsIl8iLCJ1bnppcCIsImdyaWRBcnIiLCJyb3dPYmoiLCJleHRlbmQiLCJncmlkT2JqIiwidGltZVNsb3RzIiwic2xvdHNTaXplIiwibGVuZ3RoIiwidGltZSIsImJ1aWxkR3JpZE1vZGVsIiwidGlsZVRtcGwiLCJpdCIsInJlc3VsdHMiLCJ0aXRsZSIsInNwYW4iLCJyb3ciLCJjb2wiLCJiYWNrZ3JvdW5kIiwidGhpcyIsInRpbGVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQUEsYUFBQSxVQUFBLFVBQUEsZUFBQSxrQkFBQSxvQkFDQUYsS0FBQUcsUUFBQSxpQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxHQUNBQSxFQUFBQyxXQUNBQyxTQUFBLElBRUFILEVBQ0FJLEtBQUEsU0FDQUMsWUFBQSw2QkFFQUQsS0FBQSxLQUNBQyxZQUFBLG9D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LElBQUFpQyxLQUdBakMsR0FBQVksUUFBQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFvQixLQUlBckIsR0FBQUQsUUFBQSxTQUFBYyxFQUFBQyxHQUVBSSxFQUFBSSxPQUFBRCxFQUFBUixLQUlBTyxFQUFBbEIsS0FBQW1CLEtBSUFFLFVBS0EsS0FGQSxHQUFBQyxNQUNBQyxFQUFBTCxFQUFBTSxPQUNBRCxLQUNBRCxFQUFBdEIsTUFBQXlCLEtBQUEsU0FBQVAsRUFBQSxPQUFBSyxJQUdBekYsU0FBQUMsSUFBQXVGLEdBR0FOLEVBQUFJLE9BQUFDLFFBQUFILEdBR0FqQyxFQUFBaUMsSUFDQXRGLEtBQUEsV0FHQTFCLEVBQUFnRixZQUFBUyxXQUFBWCxFQUNBOUUsRUFBQWdGLFlBQUExQyxLQUFBeUMsUUNySEEzRixRQUFBQyxPQUFBLE9BQUFRLFdBQUEsYUFBQSxTQUFBRyxHQUtBLFFBQUF3SCxHQUFBQyxHQUNBLEdBQUFDLEdBQUFDLElBU0EsT0FSQUQsR0FBQXRJLFFBQUE4SCxVQUFBTyxHQUNBQyxFQUFBRSxNQUFBRixFQUFBRSxNQUNBRixFQUFBRyxNQUFBQyxJQUFBLEVBQUFDLElBQUEsR0FDQUwsRUFBQU0sV0FBQSxPQUNBTixFQUFBRyxLQUFBQyxJQUFBSixFQUFBRyxLQUFBRSxJQUFBLEVBRUFKLEVBQUE3QixLQUFBNEIsR0FFQUMsRUFkQU0sS0FBQUMsTUFBQVYsR0FDQUksTUFBQSxjQUNBSSxXQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdNYXRlcmlhbCcsICduZ1JvdXRlJywgJ3VpLmdyaWQnLCAndWkuZ3JpZC5lZGl0JywgJ3VpLmdyaWQucm93RWRpdCcsICd1aS5ncmlkLmV4cG9ydGVyJ10pO1xuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgfSk7XG4gICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgIHdoZW4oJy9ob21lJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9ob21lLmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9sb2dpbi9sb2dpbi5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2ZvcmdvdCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZm9yZ290L2ZvcmdvdC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2V2ZW50cycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZXZlbnRzL2V2ZW50cy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL3N0dWRlbnRzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9zdHVkZW50cy9zdHVkZW50cy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2ludGVydmlld2VycycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvaW50ZXJ2aWV3ZXJzL2ludGVydmlld2Vycy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2FyY2hpdmVkLWV2ZW50cycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvYXJjaGl2ZWQtZXZlbnRzL2FyY2hpdmVkLWV2ZW50cy5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL3Byb2ZpbGUnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL3Byb2ZpbGUvcHJvZmlsZS5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2xvZ291dCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvbG9nb3V0L2xvZ291dC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL25ldy1ldmVudCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvbmV3LWV2ZW50L25ldy1ldmVudC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL2V2ZW50Jywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9ldmVudC9ldmVudC5odG1sJ1xuICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL3Jlc2V0Lzp0b2tlbicsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyZXNldCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL3Jlc2V0L3Jlc2V0Lmh0bWwnXG4gICAgICAgIH0pLlxuICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSlcbn1dKTtcblxuLy9TdHVkZW50IERpYWxvZyBDb250cm9sbGVyXG5hcHAuY29udHJvbGxlcignc3R1ZGVudCcsIFsnJHNjb3BlJywgJyRtZERpYWxvZycsIGZ1bmN0aW9uKCRzY29wZSwkbWREaWFsb2cpe1xuICAgICRzY29wZS5vcGVuU3R1ZGVudHMgPSBmdW5jdGlvbihldil7XG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGFkZFN0dWRlbnQsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2RpYWxvZ3Mvc3R1ZGVudC5kaWFsb2cuaHRtbCcsXG4gICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWVcbiAgICAgICAgfSlcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGFkZFN0dWRlbnQoJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGFuaWVzID0gW1xuICAgICAgICAgICAgICAgIHtuYW1lOiAnUHJpbWUnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ05lcmRlcnknfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ0RpZ2l0YWwgUGVvcGxlJ31cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAkc2NvcGUuZXZlbnRzID0gW1xuICAgICAgICAgICAgICAgIHtuYW1lOiAnbW9ja3MgRGVsdGEnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NhcmVlciBEZWx0YSd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnbW9ja3MgRXBzaWxvbid9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfVxuXG59XSk7XG5cbi8vSW50ZXJ2aWV3ZXIgRGlhbG9nIENvbnRyb2xsZXJcbmFwcC5jb250cm9sbGVyKCdpbnRlcnZpZXdlcicsIFsnJHNjb3BlJywgJyRtZERpYWxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJG1kRGlhbG9nKXtcbiAgICAkc2NvcGUub3BlbkludGVydmlld2VyID0gZnVuY3Rpb24oZXYpe1xuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYWRkSW50ZXJ2aWV3ZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYXJ0aWFscy9kaWFsb2dzL2ludGVydmlld2VyLmRpYWxvZy5odG1sJyxcbiAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuICAgICAgICB9KVxuICAgIH07XG4gICAgZnVuY3Rpb24gYWRkSW50ZXJ2aWV3ZXIoJHNjb3BlLCAkbWREaWFsb2cpe1xuICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgfTtcbiAgICAkc2NvcGUuY29ob3J0cyA9IFtcbiAgICAgICAge25hbWU6ICdEZWx0YSd9LFxuICAgICAgICB7bmFtZTogJ2dhbW1hJ30sXG4gICAgICAgIHtuYW1lOiAnRXBzaWxvbid9XG4gICAgXTtcbiAgICAkc2NvcGUuZXZlbnRzID0gW1xuICAgICAgICB7bmFtZTogJ21vY2tzIERlbHRhJ30sXG4gICAgICAgIHtuYW1lOiAnY2FyZWVyIERlbHRhJ30sXG4gICAgICAgIHtuYW1lOiAnbW9ja3MgRXBzaWxvbid9XG4gICAgXVxuICAgIH1cbn1dKTtcblxuLy9VcGxvYWQgRGlhbG9nIGNvbnRyb2xsZXJcbmFwcC5jb250cm9sbGVyKCd1cGxvYWRzJywgWyckc2NvcGUnLCAnJG1kRGlhbG9nJywgZnVuY3Rpb24oJHNjb3BlLCAkbWREaWFsb2cpe1xuICAgICRzY29wZS5vcGVuVXBsb2FkcyA9IGZ1bmN0aW9uKGV2KXtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogdXBsb2FkRmlsZSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFydGlhbHMvZGlhbG9ncy91cGxvYWQuZGlhbG9nLmh0bWwnLFxuICAgICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXG4gICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBmdW5jdGlvbiB1cGxvYWRGaWxlKCRzY29wZSwgJG1kRGlhbG9nKXtcbiAgICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgZm9yIHRoZSByZWdpc3RyYXRpb24gYWxzbyBzZW5kcyBwb3N0IHRvIGNyZWF0ZSBhIHVzZXJcbmFwcC5jb250cm9sbGVyKCdyZWdpc3Rlck9wZW4nLCBbJyRzY29wZScsICckbWREaWFsb2cnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRtZERpYWxvZyl7XG4gICAgJHNjb3BlLm9wZW5SZWdpc3RlciA9IGZ1bmN0aW9uKGV2KXtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogcmVnaXN0ZXIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhcnRpYWxzL2RpYWxvZ3MvcmVnaXN0ZXIuZGlhbG9nLmh0bWwnLFxuICAgICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXG4gICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBmdW5jdGlvbiByZWdpc3Rlcigkc2NvcGUsICRodHRwLCAkbWREaWFsb2cpIHtcbiAgICAgICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCl7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2UgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgdG8gc2VuZCByZXNldCBlbWFpbFxuYXBwLmNvbnRyb2xsZXIoJ3NlbmRFbWFpbCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbil7XG4gICAgJHNjb3BlLnNlbmQgPSBmdW5jdGlvbihlbWFpbCkge1xuICAgICAgICAkaHR0cC5wb3N0KCcvZm9yZ290Jywge2VtYWlsOiBlbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XSk7XG5cbi8vY29udHJvbGxlciB0byBzZW5kIHBhc3N3b3JkIHRvIGF1dGhlbnRpY2F0aW9uIGFuZCBsb2dpbiB0byB3ZWJzaXRlIG9uIGNvbmZpcm1hdGlvblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luJywgWyckcm9vdFNjb3BlJywnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICckbWRUb2FzdCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgJG1kVG9hc3Qpe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXV0aGVudGljYXRlJywge3VzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS50b2tlbil7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnVzZXJuYW1lID0gYW5ndWxhci50b0pzb24ocmVzcG9uc2UuZGF0YS51c2VyLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UuZW1haWwgPSBhbmd1bGFyLnRvSnNvbihyZXNwb25zZS5kYXRhLnVzZXIuZW1haWwpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS50b2tlbiA9IGFuZ3VsYXIudG9Kc29uKHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2V2ZW50cycpO1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xvZ2dlZCBJbicpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3dTaW1wbGUocmVzcG9uc2UuZGF0YS5lcnJvcilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICApXG4gICAgfVxufV0pO1xuXG4vL2NvbnRyb2xsZXIgZm9yIG1haW4gdG9vbGJhclxuYXBwLmNvbnRyb2xsZXIoJ3Rvb2xiYXInLCBbJyRyb290U2NvcGUnLCckc2NvcGUnLCAnJHdpbmRvdycsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHdpbmRvdyl7XG4gICAgJHNjb3BlLnVzZXIgPSAkd2luZG93LnNlc3Npb25TdG9yYWdlO1xuICAgICRzY29wZS5wYXRocyA9IHRydWU7XG4gICAgJHJvb3RTY29wZS4kb24oJ2xvZ2dlZCBJbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKCR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICRzY29wZS5wYXRocyA9IHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJHNjb3BlLnBhdGhzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KVxuXG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdyZXNldCcsWyckc2NvcGUnLCAnJGh0dHAnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uKXtcbiAgICAkc2NvcGUuY2hhbmdlUGFzcyA9IGZ1bmN0aW9uKHBhc3N3b3JkLCBjb25maXJtKXtcbiAgICAgICAgY29uc29sZS5sb2cocGFzc3dvcmQpO1xuICAgICAgICB2YXIgdG9rZW4gPSAkcm91dGVQYXJhbXMudG9rZW47XG4gICAgICAgIGlmKHBhc3N3b3JkID09PSBjb25maXJtKXtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9yZXNldCcsIHtwYXNzd29yZDogcGFzc3dvcmQsIHRva2VuOiB0b2tlbn0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1dKTtcblxuLy9jb250cm9sbGVyIGZvciB0aGUgbG9nb3V0IGZ1bmN0aW9uYWxpdHlcbmFwcC5jb250cm9sbGVyKCdsb2dvdXQnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywnJGxvY2F0aW9uJywgJyRpbnRlcnZhbCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCAkaW50ZXJ2YWwpe1xuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ291dCcpO1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xvZ2dlZCBJbicpO1xuICAgICAgICAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICAgIH0sIDMwMDAsIDEpXG4gICAgfTtcbn1dKTtcblxuLy9kaXJlY3RpdmUgdG8gY2hlY2sgdGhlIHBhc3N3b3JkcyBhcmUgdGhlIHNhbWVcbmFwcC5kaXJlY3RpdmUoJ3ZlcmlmeVNhbWUnLCBmdW5jdGlvbigpe1xuICAgICAgIHJldHVybiB7XG4gICAgICAgICAgIHJlcXVpcmU6IFwibmdNb2RlbFwiLFxuICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgb3RoZXJNb2RlbFZhbHVlOiBcIj1jb21wYXJlVG9cIlxuICAgICAgICAgICB9LFxuICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgbmdNb2RlbCkge1xuXG4gICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmNvbXBhcmVUbyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZSA9PSBzY29wZS5vdGhlck1vZGVsVmFsdWU7XG4gICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goXCJwYXNzd29yZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgIH1cbiAgICAgICB9O1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ2dlbmVyYXRlQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuXG4gICAgLy8gdGltZSBleHBlcmltZW50c1xuICAgIHZhciBzdGFydFRpbWUgPSBtb21lbnQoJzE6MDAgUE0nLCAnaDptbSBBJykuZm9ybWF0KCdISDptbScpO1xuICAgIHZhciBlbmRUaW1lID0gbW9tZW50KCc0OjAwIFBNJywgJ2g6bW0gQScpLmZvcm1hdCgnSEg6bW0nKTtcbiAgICB2YXIgZXZlbnRMZW5ndGggPSBtb21lbnQoZW5kVGltZSwgJ0hIOm1tJykuZGlmZihtb21lbnQoc3RhcnRUaW1lLCAnSEg6bW0nKSwgJ21pbnV0ZXMnKTtcbiAgICB2YXIgc2xvdExlbmd0aCA9IG1vbWVudC5kdXJhdGlvbigoZXZlbnRMZW5ndGggLyA5KSwgJ21pbnV0ZXMnKS5hc01pbnV0ZXMoKTtcbiAgICBjb25zb2xlLmxvZyhtb21lbnQoc3RhcnRUaW1lLCAnSEg6bW0nKS5hZGQoKHNsb3RMZW5ndGggKiA4KSwgJ21pbnV0ZXMnKS5mb3JtYXQoJ2g6bW0gQScpKTtcblxuICAgIC8vIEluaXRpYWxpemUgVUkgR3JpZCB2YXJpYWJsZXNcbiAgICB2YXIgZ3JpZENvbHMgPSBbXTtcbiAgICB2YXIgZ3JpZERhdGEgPSBbXTtcblxuICAgIC8vIFVJIEdyaWQgb3B0aW9uc1xuICAgICRzY29wZS5ncmlkT3B0aW9ucyA9IHtcbiAgICAgICAgZW5hYmxlU29ydGluZzogZmFsc2UsXG4gICAgICAgIGVuYWJsZUdyaWRNZW51OiB0cnVlLFxuICAgICAgICBlbmFibGVGaWx0ZXJpbmc6IGZhbHNlLFxuICAgICAgICBvblJlZ2lzdGVyQXBpOiBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkgPSBncmlkQXBpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIFwiR2VuZXJhdGVcIiBidXR0b24gY2xpY2sgZnVuY3Rpb25cbiAgICAkc2NvcGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gcmVxdWVzdCBtYXRjaGVzIGZyb20gc2VydmVyIGdpdmVuIGV2ZW50IHNldHRpbmdzXG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvdGVzdCdcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgLy8gZW1wdHkgdGhlIFVJIEdyaWQgdmFyaWFibGVzIGluIGNhc2UgdGhlcmUgaXMgZGF0YVxuICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zLmNvbHVtbkRlZnMgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5ncmlkT3B0aW9ucy5kYXRhID0gW107XG4gICAgICAgICAgICBncmlkQ29scyA9IFtdO1xuICAgICAgICAgICAgZ3JpZERhdGEgPSBbXTtcblxuICAgICAgICAgICAgLy8gY29uc29sZSBsb2cgQVBJIHJlc3BvbnNlIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBpbnRlcnZpZXdlciBhcnJheSB3aXRoaW4gdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAvLyBjcmVhdGUgdmFyaW91cyBhcnJheXMgYW5kIG9iamVjdHMgdG8gbWVldCBVSSBHcmlkIGRhdGEgcmVxdWlyZW1lbnRzXG4gICAgICAgICAgICByZXNwb25zZS5kYXRhLmludGVydmlld2VyLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgcG9zKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBwdXNoIHRoZSBjb21wYW55IGFuZCBpbnRlcnZpZXdlciBuYW1lIGludG8gdGhlIGNvbHVtbiBuYW1lcyBhcnJheVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBiZSB0aGUgY29sdW1uIGhlYWRlciBmb3IgYSBwYXJ0aWN1bGFyIGludGVydmlld2VyXG4gICAgICAgICAgICAgICAgZ3JpZENvbHMucHVzaCh7bmFtZTogaXRlbS5jb21wYW55ICsgJyAvICcgKyBpdGVtLmZOYW1lLCBmaWVsZDogaXRlbS5jb21wYW55ICsgJ18nICsgaXRlbS5uYW1lLCB3aWR0aDoxNTAsIGRpc3BsYXlOYW1lOiBpdGVtLmNvbXBhbnkgKyAnIC8gJyArIGl0ZW0uZk5hbWV9KTtcblxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgc2NoZWR1bGVkIG9iamVjdCB0byBhIHZhcmlhYmxlXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBvYmplY3QgY29udGFpbnMgdGhlIGVudGlyZSBzY2hlZHVsZSBmb3IgYW4gaW50ZXJ2aWV3ZXJcbiAgICAgICAgICAgICAgICB2YXIgc2NoZWQgPSBpdGVtLnNjaGVkdWxlZDtcblxuICAgICAgICAgICAgICAgIC8vIGluaXRpYXRlIGFuIGVtcHR5IHN0dWRlbnRzIGFycmF5XG4gICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGJlIHVzZWQgdG8gc3RvcmUgdGhlIGZvcm1hdHRlZCBzY2hlZHVsZSBmb3IgZWFjaCBjb21wYW55XG4gICAgICAgICAgICAgICAgdmFyIHN0dWRlbnRzID0gW107XG5cbiAgICAgICAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIHNjaGVkdWxlZCBvYmplY3QgdXNpbmcgdGhlIGdldE93blByb3BlcnR5TmFtZXMgbWV0aG9kXG4gICAgICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc2NoZWQpLmZvckVhY2goZnVuY3Rpb24gKGVsZW0sIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB0aGF0IGNvbnRhaW5zIGVhY2ggc2NoZWR1bGVkIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBhcnJheSB3aWxsIGNvbnRhaW4gdGhlIGZvcm1hdHRlZCBzY2hlZHVsZSBmb3IgYW4gaW50ZXJ2aWV3ZXJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVPYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVPYmpbaXRlbS5jb21wYW55ICsgJ18nICsgaXRlbS5mbmFtZV0gPSBzY2hlZFtlbGVtXTtcbiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHMucHVzaCh0aXRsZU9iaik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcHVzaCB0aGUgdXBkYXRlZCBzY2hlZHVsZSBhcnJheSBpbnRvIHRoZSBtYXN0ZXIgZ3JpZERhdGEgYXJyYXlcbiAgICAgICAgICAgIGdyaWREYXRhLnB1c2goc3R1ZGVudHMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGdyaWREYXRhIGlzIHN0aWxsIG5vdCBjb3JyZWN0bHkgZm9ybWF0dGVkXG4gICAgICAgICAgICAvLyBlYWNoIGl0ZW0gcmVwcmVzZW50cyBhbiBpbnRlcnZpZXdlciBjb2x1bW5cbiAgICAgICAgICAgIC8vIHdoZW4gaW4gZmFjdCwgVUkgR3JpZCByZXF1aXJlcyBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHRvIGJlIGEgcm93IG9mIGRhdGFcbiAgICAgICAgICAgIC8vIFVuZGVyc2NvcmUgdW56aXAgZnVuY3Rpb24gcGVyZm9ybXMgbmVjZXNzYXJ5IG1hdHJpeCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICAgICAgZ3JpZERhdGEgPSBfLnVuemlwKGdyaWREYXRhKTtcblxuICAgICAgICAgICAgLy8gaW5pdGlhdGUgZW1wdHkgYXJyYXkgdG8gc3RvcmUgZWFjaCByb3cgYXMgYW4gb2JqZWN0IG9mIG9iamVjdHNcbiAgICAgICAgICAgIHZhciBncmlkQXJyID0gW107XG5cbiAgICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB1bnppcHBlZCBncmlkRGF0YVxuICAgICAgICAgICAgZ3JpZERhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgcG9zKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBpbml0aWF0ZSBlbXB0eSBvYmplY3QgZm9yIHN0b3JpbmcgaW5kaXZpZHVhbCBzY2hlZHVsZSBpdGVtc1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSB7fTtcblxuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgc2NoZWR1bGUgcm93XG4gICAgICAgICAgICAgICAgLy8gZWFjaCBpdGVtIGluIHRoZSByb3cgYXJyYXkgcmVwcmVzZW50cyBhIHNpbmdsZSBjZWxsIGluIHRoZSBncmlkXG4gICAgICAgICAgICAgICAgaXRlbS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB1c2UgVW5kZXJzY29yZSBleHRlbmQgbWV0aG9kIHRvIFwicHVzaFwiIGVhY2ggaXRlbSBpbnRvIHJvdyBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgXy5leHRlbmQocm93T2JqLCBlbGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIHB1c2ggdGhlIHJvdyBvYmplY3QgaW50byB0aGUgcHJldmlvdXNseSBpbml0aWF0ZWQgZ3JpZCBhcnJheVxuICAgICAgICAgICAgICAgIGdyaWRBcnIucHVzaChyb3dPYmopO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGluaXRpYXRlIGFuIGVtcHR5IG9iamVjdCBmb3Igc3RvcmluZyB0aGUgZW50aXJlIHNjaGVkdWxlXG4gICAgICAgICAgICBncmlkT2JqID0ge307XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aW1lIHNsb3RzIGNvbHVtblxuICAgICAgICAgICAgdmFyIHRpbWVTbG90cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHNsb3RzU2l6ZSA9IGdyaWRBcnIubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUoc2xvdHNTaXplLS0pIHtcbiAgICAgICAgICAgICAgICB0aW1lU2xvdHMucHVzaCh7dGltZTogJ1Nsb3QgJyArICgoZ3JpZEFyci5sZW5ndGgpIC0gc2xvdHNTaXplKX0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aW1lU2xvdHMpO1xuXG4gICAgICAgICAgICAvLyB1c2luZyBVbmRlcnNjb3JlIGV4dGVuZCBhZ2FpbiwgXCJwdXNoXCIgdGhlIGFycmF5IG9mIG9iamVjdHMgaW50byB0aGUgbWFzdGVyIG9iamVjdFxuICAgICAgICAgICAgXy5leHRlbmQoZ3JpZE9iaiwgZ3JpZEFycik7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZ3JpZERhdGEgdmFyaWFibGVcbiAgICAgICAgICAgIGdyaWREYXRhID0gZ3JpZEFycjtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gYWZ0ZXIgY2FwdHVyaW5nIGFuZCBmb3JtYXR0aW5nIHRoZSBkYXRhLCB1cGRhdGUgVUkgR3JpZCBvcHRpb25zXG4gICAgICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMuY29sdW1uRGVmcyA9IGdyaWRDb2xzO1xuICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zLmRhdGEgPSBncmlkRGF0YTtcbiAgICAgICAgfSlcbiAgICB9O1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdldmVudHNDdHJsJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgIHRoaXMudGlsZXMgPSBidWlsZEdyaWRNb2RlbCh7XG4gICAgICAgICAgICB0aXRsZTogXCJFdmVudCBUaXRsZVwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogXCJcIlxuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRHcmlkTW9kZWwodGlsZVRtcGwpe1xuICAgICAgICAgICAgdmFyIGl0LCByZXN1bHRzID0gWyBdO1xuICAgICAgICAgICAgICAgIGl0ID0gYW5ndWxhci5leHRlbmQoe30sdGlsZVRtcGwpO1xuICAgICAgICAgICAgICAgIGl0LnRpdGxlID0gaXQudGl0bGU7XG4gICAgICAgICAgICAgICAgaXQuc3BhbiAgPSB7IHJvdyA6IDEsIGNvbCA6IDEgfTtcbiAgICAgICAgICAgICAgICBpdC5iYWNrZ3JvdW5kID0gXCJncmF5XCI7XG4gICAgICAgICAgICAgICAgaXQuc3Bhbi5yb3cgPSBpdC5zcGFuLmNvbCA9IDE7XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goaXQpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuICAgIH0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
